<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<!-- Favicon !-->
	<link rel="icon" href="../Resources/favicon.png" type="image/png">
	
	<title>Language Example: js | EnlighterJS</title>
	
	<!-- Bootstrap CSS - just 4 styling - not required for enlighterjs -->
	<link rel="stylesheet" href="../Resources/bootstrap.min.css">
	<link rel="stylesheet" href="../Resources/bootstrap-theme.min.css">
	<link rel="stylesheet" href="../Resources/Template.css">

	<!-- Include EnlighterJS Styles -->
	<link rel="stylesheet" type="text/css" href="../Build/EnlighterJS.css" />
	
	<!-- Include MooTools Framework -->
	<script type="text/javascript" src="../Resources/mootools-core-1.4.5-full-nocompat.js"></script>

	<!-- Include EnlighterJS -->
	<script type="text/javascript" src="../Build/EnlighterJS.js"></script>	

	<meta name="EnlighterJS" content="Advanced javascript based syntax highlighting" data-language="javascript" data-indent="4" data-selector-block="pre" data-selector-inline="code" data-rawcodebutton="true" /></head>
<body>
	<!-- Topnav -->
	<div id="navbar-wrapper">
		<div class="container">
			<div class="navbar navbar-inverse" role="navigation">
				<div class="navbar-header">
					<a class="navbar-brand" href="index.html">EnlighterJS </a>
				</div>
				<ul class="nav navbar-nav">
					<li><a href="Quickstart.html">Quickstart</a></li>
					<li><a href="index.html">Docs<b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="index.html">Documentation</a></li>
							<li><a href="Changelog.html">Changelog</a></li>
						</ul>
					</li>
					<li class="dropdown"><a href="#">Examples<b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li class="dropdown-header">Languages</li>
							<li><a href="html.html">HTML</a></li>
							<li><a href="css.html">CSS</a></li>
							<li><a href="js.html">Javascript</a></li>
							<li><a href="xml.html">XML</a></li>
							<li><a href="markdown.html">Markdown</a></li>
							<li><a href="json.html">JSON</a></li>
							<li><a href="php.html">PHP</a></li>
							<li><a href="sql.html">SQL</a></li>
							<li><a href="java.html">Java</a></li>
							<li><a href="python.html">Python</a></li>
							<li><a href="csharp.html">C#</a></li>
							<li><a href="cpp.html">C++</a></li>
							<li><a href="c.html">C</a></li>
							<li><a href="ruby.html">Ruby</a></li>
							<li><a href="nsis.html">NSIS</a></li>
							<li><a href="raw.html">RAW Code</a></li>
							<li><a href="nohighlight.html">No-Highlighted Code</a></li>
							
							<li class="divider"></li>
							<li class="dropdown-header">Special</li>
							<li><a href="unit.html">Unit Testcases</a></li>
						</ul></li>
					<li><a href="Themes.html">Themes</a></li>
					
					<li><a href="http://wordpress.org/plugins/enlighter/">Plugins<b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="http://wordpress.org/plugins/enlighter/">Enlighter for WordPress</a></li>
						</ul>
					</li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="https://github.com/AndiDittrich/EnlighterJS/archive/master.zip">Get EnlighterJS<b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li class="dropdown-header">Get it from GitHub</li>
							<li><a href="https://github.com/AndiDittrich/EnlighterJS/archive/master.zip">Download (latest)</a></li>
							<li><a href="https://github.com/AndiDittrich/EnlighterJS">Browse on GitHub</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- // topnav -->


	<!-- Begin page content -->
	<div class="container">
		<div class="page-header">
			<h1>
				<strong>EnlighterJS</strong> <small>Language Example: js</small>
			</h1>
		</div>
		<div id="content">
			<!-- ############################################################# -->
			<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor
<code data-enlighter-language="js">var another_greeting = 'Greetings, people of Earth.';</code> invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.
</p>

<pre data-enlighter-language="js">
// Comments
/* This
 is a
 block
 * comment
 */

/** Numbers */
345;    // an "integer", although there is only one numeric type in JavaScript
34.5;   // a floating-point number
3.45e2; // another floating-point, equivalent to 345
0377;   // an octal integer equal to 255
0xFF;   // a hexadecimal integer equal to 255, the letters A-F may be upper- or lowercase

/** Strings */
var greeting = "Hello, world!";
var another_greeting = 'Greetings, people of Earth.';
var escaped_strings = "Hello from an \" escaped string" + 'this should \' work';

/** Regex */
var regex = new RegExp("pattern" [, "flags"]);
var literal = /pattern/gimy;

/** Snippet */
var Language = new Class({
	
	Implements: [Options],
	options: {
		matchType: "standard",
		strict: false
	},
	language: '',
	defaultTheme: 'standard',
	
	patterns: new Hash(),
	keywords: new Hash(),
	rules:    new Hash(),
	delimiters: new Hash({
		start: null,
		end: null
	}),

	/************************
	 * Common Regex Rules
	 ***********************/
	common: {	
		slashComments: /(?:^|[^\\])\/\/.*$/gm, // Matches a C style single-line comment.
		poundComments: /#.*$/gm,                 // Matches a Perl style single-line comment.
		multiComments: /\/\*[\s\S]*?\*\//gm,     // Matches a C style multi-line comment.
		aposStrings:   /'[^'\\]*(?:\\.[^'\\]*)*'/gm, // Matches a string enclosed by single quotes.
		quotedStrings: /"[^"\\]*(?:\\.[^"\\]*)*"/gm, // Matches a string enclosed by double quotes.
		strings:       /'[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"/gm, // Matches both.
		properties:    /\.([\w]+)\s*/gi,   // Matches a property: .property style.
		methodCalls:   /\.([\w]+)\s*\(/gm, // Matches a method call: .methodName() style.
		functionCalls: /\b([\w]+)\s*\(/gm,   // Matches a function call: functionName() style.
		brackets:      /\{|\}|\(|\)|\[|\]/g, // Matches any of the common brackets.
		numbers:       /\b((?:(\d+)?\.)?[0-9]+|0x[0-9A-F]+)\b/gi // Matches integers, decimals, hexadecimals.
	},
	
	/************************
	 * Language Constructor
	 ***********************/
	initialize: function(lighter, theme, options, tokens) {
		this.setOptions(options);
		this.tokens = tokens || [];
		options = this.options;
		
		// Set Lighter/Language/Theme relationship.
		this.lighter = lighter;
		this.theme = new Theme[theme || this.defaultTheme](lighter, this);
		
		// Add delimiter rules if not in strict mode
		if (!options.strict) {
			if (this.delimiters.start) this.addLanguage('delimBeg', this.delimiters.start, 'de1');
			if (this.delimiters.end)   this.addLanguage('delimEnd', this.delimiters.end,   'de2');
		}
		
		// Set Keyword Rules from this.keywords object.
		this.keywords.each(function(keywordSet, ruleName) {
			if (keywordSet.csv != '') {
				this.addLanguage(ruleName, this.csvToRegExp(keywordSet.csv, "g"), keywordSet.alias);
			}
		}, this);
		
		// Set Rules from this.patterns object.
		this.patterns.each(function(regex, ruleName) {
			this.addLanguage(ruleName, regex.pattern, regex.alias);
		}, this);
		
		// Set builder object for matchType.
		this.builder = new Hash({
			'standard': this.findMatches,
			'lazy':     this.findMatchesLazy
		});
		
		/** Process source code based on match type. */
		var codeBeg = 0,
		    codeEnd = lighter.code.length,
		    codeSeg = '',
		    delim   = this.delimiters,
		    matches = [],
		    match   = null,
		    endMatch = null;
		
		if (!options.strict) {
			// Find matches through the complete source code.
			matches.extend(this.builder[options.matchType].pass(lighter.code, this)());
		} else if (delim.start && delim.end) {
			// Find areas between language delimiters and find matches there.
			while ((match = delim.start.exec(lighter.code)) != null ) {
				delim.end.lastIndex = delim.start.lastIndex;
				if ((endMatch = delim.end.exec(lighter.code)) != null ) {
					matches.push(new Token(match[0], 'de1', match.index));
					codeBeg = delim.start.lastIndex;
					codeEnd = endMatch.index-1;
					codeSeg = lighter.code.substring(codeBeg, codeEnd);
					matches.extend(this.builder[options.matchType].pass([codeSeg, codeBeg], this)());
					matches.push(new Token(endMatch[0], 'de2', endMatch.index));
				}
			}
		}
		this.tokens = matches;
	},
	
	/************************
	 * Regex Helper methods.
	 ***********************/
	addLanguage: function(languageName, RegEx, className) {
		this.rules[languageName] = RegEx;
		this.theme.addAlias(languageName, className);
	},
	csvToRegExp: function(csv, mod) {return new RegExp('\\b(' + csv.replace(/,\s*/g, '|') + ')\\b', mod);},
	delimToRegExp: function(beg, esc, end, mod, suffix) {
		beg = beg.escapeRegExp();
		if (esc) esc = esc.escapeRegExp();
		end = (end) ? end.escapeRegExp() : beg;
		pat = (esc) ? beg+"[^"+end+esc+'\\n]*(?:'+esc+'.[^'+end+esc+'\\n]*)*'+end : beg+"[^"+end+'\\n]*'+end;
		return new RegExp(pat+(suffix || ''), mod || '');
	},
	strictRegExp: function() {
		var regex = '(';
		for (var i = 0; i &lt; arguments.length; i++) {
			regex += arguments[i].escapeRegExp();
			regex += (i &lt; arguments.length - 1) ? '|' : '';
		}
		regex += ')';
		return new RegExp(regex, &quot;gim&quot;);
	},
	
	/************************
	 * Match finding Methods
	 ***********************/
	findMatches: function(code, offset) {
		var tokens       = [],
		    startIndex  = 0,
		    matchIndex  = code.length
		    insertIndex = 0,
		    match      = null,
		    type       = null,
		    newToken    = null,
		    rule       = null,
		    rules      = {},
		    currentMatch = null,
		    futureMatch  = null;
		
		offset = (offset) ? offset : 0;
		this.rules.each(function(regex, rule) {
			rules[rule] = {pattern: regex, enabled: true, lastIndex: 0};
		}, this);
		    
		while(startIndex &lt; code.length) {
			matchIndex = code.length;
			match = null;
			for (rule in rules) {
				rules[rule].pattern.lastIndex = startIndex;
				currentMatch = rules[rule].pattern.exec(code);
				if (currentMatch === null) {
					delete rules[rule];
				} else {
					if (currentMatch.index &lt; matchIndex) {
			      match      = currentMatch;
			      type       = rule;
			      matchIndex = currentMatch.index;
			    } else if (currentMatch.index == matchIndex &amp;& match[0].length &lt; currentMatch[0].length) {
						match      = currentMatch;
						type       = rule;
						matchIndex = currentMatch.index;
					}
			    rules[rule].nextIndex = rules[rule].pattern.lastIndex - currentMatch[0].length;
			  }
			}
			if (match != null) {
				index = (match[1] &amp;& match[0].contains(match[1])) ? match.index + match[0].indexOf(match[1]) : match.index;
				newToken = new Token(match[1] || match[0], type, index+offset);
				tokens.push(newToken);
				
				futureMatch = rules[type].pattern.exec(code);
	      if (!futureMatch) {
	      	rules[type].nextIndex = code.length;
	      } else {
	      	rules[type].nextIndex = rules[type].pattern.lastIndex - futureMatch[0].length;
	      }
				
				var min = code.length;
				for (rule in rules) {
					if (rules[rule].nextIndex &lt; min) {
						min = rules[rule].nextIndex;
					}
				}
				startIndex = Math.max(min, newToken.end - offset);
			} else {
				break;
			}
		}
		return tokens;
	},
	findMatchesLazy: function(code, offset) {
		var tokens = this.tokens,
		    match = null
		    index = 0;
		
		offset = (offset) ? offset : 0;
		
		this.rules.each(function(regex, rule) {
			while ((match = regex.exec(code)) != null) {
				index = (match[1] &amp;& match[0].contains(match[1])) ? match.index + match[0].indexOf(match[1]) : match.index;
				tokens.push(new Token(match[1] || match[0], rule, index + offset));
			}
		}, this);
		return this.purgeTokens(tokens);
	},
	purgeTokens: function(tokens) {
		tokens = tokens.sort(this.compareTokens);
		for (var i = 0, j = 0; i &lt; tokens.length; i++) {
			if (tokens[i] == null) continue;
			for (j = i+1; j &lt; tokens.length &amp;& tokens[i] != null; j++) {
				if      (tokens[j] == null)            {continue;}
				else if (tokens[j].isBeyond(tokens[i])) {break;}
				else if (tokens[j].overlaps(tokens[i])) {tokens[i] = null;}
				else if (tokens[i].contains(tokens[j])) {tokens[j] = null;}
			}
		}
		return tokens.clean();
	},
	compareTokens: function(token1, token2) {return token1.index - token2.index;}
});

var Token = new Class({

	initialize: function(match, type, index) {
		this.text   = match;
		this.type   = type;
		this.index  = index;
		this.length = this.text.length;
		this.end    = this.index + this.length;
	},
	contains: function(token) {return (token.index &gt;= this.index &amp;& token.index &lt; this.end);},
	isBeyond: function(token) {return (this.index &gt;= token.end);},
	overlaps: function(token) {return (this.index == token.index &amp;& this.length &gt; token.length);},
	toString: function() {return this.index+' - '+this.text+' - '+this.end;}
});

</pre>			<!-- ############################################################# -->

		</div>
		<!-- // content -->


	</div>
	<!-- // container -->

	<!-- Sticky Footer Message -->
	<div id="footer">
		<div class="container">
			<p class="text-muted">
				<strong>EnlighterJS</strong> is developed by <a href="http://andidittrich.de">Andi Dittrich</a><br /> <a href="https://github.com/AndiDittrich/EnlighterJS/archive/master.zip">Download</a> EnlighterJS on <a href="https://github.com/AndiDittrich/EnlighterJS">GitHub</a> | It's released under the Terms of <a href="LICENSE.txt">MIT X11 License</a> | Demo created with <a href="http://getbootstrap.com">Bootstrap</a>
			</p>
		</div>
	</div>
	<!-- // Sticky Footer Message -->

</body>
</html>